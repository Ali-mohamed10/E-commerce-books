import{r as h,N as g,u as y,j as e,S as j}from"./index-CRDKuSNj.js";import{C as b}from"./CartButton-BDaAvZVT.js";import{S as c}from"./AnimationSection-BFQCLYcG.js";const f="+201154167974";function C(){const{data:a,setData:l}=h.useContext(g),{isSignedIn:u}=y(),i=a?.flatMap(n=>n.books.filter(t=>t.isToCart).map(t=>({title:t.title,imgCover:t.book_image,author:t.author,price:t.price,listName:n.list_name,uniqueId:t.uniqueId,isbn:t.primary_isbn13,quantity:t.quantity??1})))||[],o=i.reduce((n,t)=>n+(Number(t.price)||0)*(Number(t.quantity)||1),0),d=()=>{const t=`ðŸ›’ Order Details:

${i.map(s=>`ðŸ“š ${s.title} - ${s.author} - Qty: ${s.quantity} - $${s.price}`).join(`
`)}

ðŸ’° Total: $${o}

Hello! I would like to purchase these books.`,r=`https://wa.me/${f}?text=${encodeURIComponent(t)}`;window.open(r,"_blank")},x=n=>{a&&l(t=>t&&t.map(r=>({...r,books:r.books.map(s=>s.uniqueId!==n?s:{...s,quantity:(s.quantity??1)+1})})))},m=n=>{a&&l(t=>t&&t.map(r=>({...r,books:r.books.map(s=>{if(s.uniqueId!==n)return s;const p=Math.max(1,(s.quantity??1)-1);return{...s,quantity:p}})})))};return e.jsx(c,{children:e.jsxs("div",{className:"shop-cart container mx-auto px-5 rounded-2xl py-12 bg-backgrounds",children:[e.jsx("h2",{className:"text-2xl md:text-3xl mb-2 font-bold",children:"Shop Cart :"}),i.length!==0?i.map(n=>e.jsx(c,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap gap-5 mt-5 items-center",children:[e.jsx("div",{children:e.jsx("img",{src:n.imgCover,alt:n.title,loading:"lazy",className:"h-32 w-full"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl md:text-2xl mb-1",children:n.title}),e.jsxs("span",{className:"block text-second text-base md:text-2xl mb-8",children:["price : $",n.price]}),e.jsx(b,{uniqueId:n.uniqueId})]}),e.jsxs("div",{className:"ml-auto",children:[e.jsx("button",{className:`text-white ml-2 py-0.5 px-1.5 border border-second bg-main ${n.quantity===1?"opacity-30":"cursor-pointer"}`,onClick:()=>m(n.uniqueId),children:"-"}),e.jsx("span",{className:"ml-2",children:n.quantity}),e.jsx("button",{className:"text-white ml-2 py-0.5 px-1.5 border border-second bg-main cursor-pointer",onClick:()=>x(n.uniqueId),children:"+"})]})]}),e.jsx("hr",{className:"mt-5"})]},n.uniqueId)})):e.jsx(e.Fragment,{children:e.jsx("p",{className:"text-gray-600 text-center text-xl md:text-2xl mt-5",children:"Your cart is empty"})}),i.length>0?e.jsxs("div",{className:"flex flex-wrap justify-between gap-5 mt-5",children:[e.jsxs("span",{className:"text-green-600 dark:text-green-500 md:text-xl",children:["Total Cart Price : $",o]}),u?e.jsx("button",{onClick:d,className:"bg-green-700 px-4 py-1 rounded-xl font-bold cursor-pointer text-white hover:bg-green-800 transition-colors duration-200",children:"Proceed To Buy"}):e.jsx(j,{mode:"modal",children:e.jsx("button",{className:"bg-green-700 px-4 py-1 rounded-xl font-bold cursor-pointer text-white hover:bg-green-800 transition-colors duration-200",children:"Sign In To Buy"})})]}):""]})})}export{C as default};
