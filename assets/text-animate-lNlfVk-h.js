import{r as o,j as g}from"./index-C4Og-Jri.js";import{c as D}from"./utils-CYacXeH_.js";import{M as N,i as S,u as A,P as W,a as B,b as H,L as K,m as L}from"./AnimationSection-BKnmBjPj.js";function T(t,i){if(typeof t=="function")return t(i);t!=null&&(t.current=i)}function F(...t){return i=>{let e=!1;const s=t.map(l=>{const n=T(l,i);return!e&&typeof n=="function"&&(e=!0),n});if(e)return()=>{for(let l=0;l<s.length;l++){const n=s[l];typeof n=="function"?n():T(t[l],null)}}}}function G(...t){return o.useCallback(F(...t),t)}class X extends o.Component{getSnapshotBeforeUpdate(i){const e=this.props.childRef.current;if(e&&i.isPresent&&!this.props.isPresent){const s=e.offsetParent,l=S(s)&&s.offsetWidth||0,n=this.props.sizeRef.current;n.height=e.offsetHeight||0,n.width=e.offsetWidth||0,n.top=e.offsetTop,n.left=e.offsetLeft,n.right=l-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function _({children:t,isPresent:i,anchorX:e,root:s}){const l=o.useId(),n=o.useRef(null),y=o.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:C}=o.useContext(N),R=G(n,t?.ref);return o.useInsertionEffect(()=>{const{width:r,height:f,top:a,left:u,right:h}=y.current;if(i||!n.current||!r||!f)return;const c=e==="left"?`left: ${u}`:`right: ${h}`;n.current.dataset.motionPopId=l;const d=document.createElement("style");C&&(d.nonce=C);const w=s??document.head;return w.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${r}px !important;
            height: ${f}px !important;
            ${c}px !important;
            top: ${a}px !important;
          }
        `),()=>{w.contains(d)&&w.removeChild(d)}},[i]),g.jsx(X,{isPresent:i,childRef:n,sizeRef:y,children:o.cloneElement(t,{ref:R})})}const q=({children:t,initial:i,isPresent:e,onExitComplete:s,custom:l,presenceAffectsLayout:n,mode:y,anchorX:C,root:R})=>{const r=A(J),f=o.useId();let a=!0,u=o.useMemo(()=>(a=!1,{id:f,initial:i,isPresent:e,custom:l,onExitComplete:h=>{r.set(h,!0);for(const c of r.values())if(!c)return;s&&s()},register:h=>(r.set(h,!1),()=>r.delete(h))}),[e,r,s]);return n&&a&&(u={...u}),o.useMemo(()=>{r.forEach((h,c)=>r.set(c,!1))},[e]),o.useEffect(()=>{!e&&!r.size&&s&&s()},[e]),y==="popLayout"&&(t=g.jsx(_,{isPresent:e,anchorX:C,root:R,children:t})),g.jsx(W.Provider,{value:u,children:t})};function J(){return new Map}const I=t=>t.key||"";function z(t){const i=[];return o.Children.forEach(t,e=>{o.isValidElement(e)&&i.push(e)}),i}const Q=({children:t,custom:i,initial:e=!0,onExitComplete:s,presenceAffectsLayout:l=!0,mode:n="sync",propagate:y=!1,anchorX:C="left",root:R})=>{const[r,f]=B(y),a=o.useMemo(()=>z(t),[t]),u=y&&!r?[]:a.map(I),h=o.useRef(!0),c=o.useRef(a),d=A(()=>new Map),[w,E]=o.useState(a),[b,P]=o.useState(a);H(()=>{h.current=!1,c.current=a;for(let x=0;x<b.length;x++){const p=I(b[x]);u.includes(p)?d.delete(p):d.get(p)!==!0&&d.set(p,!1)}},[b,u.length,u.join("-")]);const k=[];if(a!==w){let x=[...a];for(let p=0;p<b.length;p++){const v=b[p],M=I(v);u.includes(M)||(x.splice(p,0,v),k.push(v))}return n==="wait"&&k.length&&(x=k),P(z(x)),E(a),null}const{forceRender:U}=o.useContext(K);return g.jsx(g.Fragment,{children:b.map(x=>{const p=I(x),v=y&&!r?!1:a===b||u.includes(p),M=()=>{if(d.has(p))d.set(p,!0);else return;let $=!0;d.forEach(V=>{V||($=!1)}),$&&(U?.(),P(c.current),y&&f?.(),s&&s())};return g.jsx(q,{isPresent:v,initial:!h.current||e?void 0:!1,custom:i,presenceAffectsLayout:l,mode:n,root:R,onExitComplete:v?void 0:M,anchorX:C,children:x},p)})})},Y={text:.06,word:.05,character:.03,line:.06},m={hidden:{opacity:1},show:{opacity:1,transition:{delayChildren:0,staggerChildren:.05}},exit:{opacity:0,transition:{staggerChildren:.05,staggerDirection:-1}}},Z={hidden:{opacity:0},show:{opacity:1},exit:{opacity:0}},j={fadeIn:{container:m,item:{hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,y:20,transition:{duration:.3}}}},blurIn:{container:m,item:{hidden:{opacity:0,filter:"blur(10px)"},show:{opacity:1,filter:"blur(0px)",transition:{duration:.3}},exit:{opacity:0,filter:"blur(10px)",transition:{duration:.3}}}},blurInUp:{container:m,item:{hidden:{opacity:0,filter:"blur(10px)",y:20},show:{opacity:1,filter:"blur(0px)",y:0,transition:{y:{duration:.3},opacity:{duration:.4},filter:{duration:.3}}},exit:{opacity:0,filter:"blur(10px)",y:20,transition:{y:{duration:.3},opacity:{duration:.4},filter:{duration:.3}}}}},blurInDown:{container:m,item:{hidden:{opacity:0,filter:"blur(10px)",y:-20},show:{opacity:1,filter:"blur(0px)",y:0,transition:{y:{duration:.3},opacity:{duration:.4},filter:{duration:.3}}}}},slideUp:{container:m,item:{hidden:{y:20,opacity:0},show:{y:0,opacity:1,transition:{duration:.3}},exit:{y:-20,opacity:0,transition:{duration:.3}}}},slideDown:{container:m,item:{hidden:{y:-20,opacity:0},show:{y:0,opacity:1,transition:{duration:.3}},exit:{y:20,opacity:0,transition:{duration:.3}}}},slideLeft:{container:m,item:{hidden:{x:20,opacity:0},show:{x:0,opacity:1,transition:{duration:.3}},exit:{x:-20,opacity:0,transition:{duration:.3}}}},slideRight:{container:m,item:{hidden:{x:-20,opacity:0},show:{x:0,opacity:1,transition:{duration:.3}},exit:{x:20,opacity:0,transition:{duration:.3}}}},scaleUp:{container:m,item:{hidden:{scale:.5,opacity:0},show:{scale:1,opacity:1,transition:{duration:.3,scale:{type:"spring",damping:15,stiffness:300}}},exit:{scale:.5,opacity:0,transition:{duration:.3}}}},scaleDown:{container:m,item:{hidden:{scale:1.5,opacity:0},show:{scale:1,opacity:1,transition:{duration:.3,scale:{type:"spring",damping:15,stiffness:300}}},exit:{scale:1.5,opacity:0,transition:{duration:.3}}}}},O=({children:t,delay:i=0,duration:e=.3,variants:s,className:l,segmentClassName:n,as:y="p",startOnView:C=!0,once:R=!1,by:r="word",animation:f="fadeIn",accessible:a=!0,...u})=>{const h=L.create(y);let c=[];switch(r){case"word":c=t.split(/(\s+)/);break;case"character":c=t.split("");break;case"line":c=t.split(`
`);break;case"text":default:c=[t];break}const d=s?{container:{hidden:{opacity:0},show:{opacity:1,transition:{opacity:{duration:.01,delay:i},delayChildren:i,staggerChildren:e/c.length}},exit:{opacity:0,transition:{staggerChildren:e/c.length,staggerDirection:-1}}},item:s}:f?{container:{...j[f].container,show:{...j[f].container.show,transition:{delayChildren:i,staggerChildren:e/c.length}},exit:{...j[f].container.exit,transition:{staggerChildren:e/c.length,staggerDirection:-1}}},item:j[f].item}:{container:m,item:Z};return g.jsx(Q,{mode:"popLayout",children:g.jsxs(h,{variants:d.container,initial:"hidden",whileInView:C?"show":void 0,animate:C?void 0:"show",exit:"exit",className:D("whitespace-pre-wrap",l),viewport:{once:R},"aria-label":a?t:void 0,...u,children:[a&&g.jsx("span",{className:"sr-only",children:t}),c.map((w,E)=>g.jsx(L.span,{variants:d.item,custom:E*Y[r],className:D(r==="line"?"block":"inline-block whitespace-pre",r==="character"&&"",n),"aria-hidden":a?!0:void 0,children:w},`${r}-${w}-${E}`))]})})},it=o.memo(O);export{Q as A,it as T};
