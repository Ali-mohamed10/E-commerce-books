import{j as e,r as c,N as C}from"./index-D2kWOT5s.js";import{C as w}from"./Card-Ci2fOATg.js";import{S as F}from"./AnimationSection-jS7EtWRv.js";import"./utils-CgCBM31U.js";import"./CartButton-DlqkhDFc.js";import"./FavoriteButton-C-xpROQx.js";function S({searchTerm:t,setSearchTerm:a,authorFilter:r,setAuthorFilter:d,listNameFilter:n,setListNameFilter:i,uniqueAuthors:p,uniqueListNames:x,filteredBooksCount:m,totalBooksCount:u,onFilterChange:h,onClearFilters:b}){return e.jsxs("div",{className:"bg-white dark:bg-backgrounds rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:"Filter Books"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bookSearch",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search by Book Title"}),e.jsx("input",{id:"bookSearch",type:"text",placeholder:"Enter book title...",value:t,onChange:s=>{a(s.target.value),h()},className:"w-full cursor-pointer px-4 py-2 border rounded-lg focus:ring-2 focus:ring-second focus:border-transparent dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"authorFilter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Author"}),e.jsxs("select",{id:"authorFilter",value:r,onChange:s=>{d(s.target.value),h()},className:"w-full cursor-pointer px-4 py-2 border rounded-lg focus:ring-2 focus:ring-second focus:border-transparent dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Authors"}),p.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"listNameFilter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Category"}),e.jsxs("select",{id:"listNameFilter",value:n,onChange:s=>{i(s.target.value),h()},className:"w-full cursor-pointer px-4 py-2 border rounded-lg focus:ring-2 focus:ring-second focus:border-transparent dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Categories"}),x.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Showing ",m," of ",u," books"]})}),(t||r||n)&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:b,className:"px-6 py-2 bg-main/60 hover:bg-main cursor-pointer text-white rounded-lg transition-colors duration-200",children:"Clear All Filters"})})]})}function A({onClearFilters:t}){return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“š"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Books Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Try changing your search criteria or filters"}),e.jsx("button",{onClick:t,className:"px-6 py-3 bg-main/60 hover:bg-main cursor-pointer text-white rounded-lg transition-colors duration-200",children:"Show All Books"})]})}function B({books:t,onClearFilters:a}){return!t||t.length===0?e.jsx(A,{onClearFilters:a}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-8",children:t.map(r=>e.jsx("div",{className:"flex justify-center",children:e.jsx(w,{title:r.title,imgCover:r.book_image,author:r.author,price:r.price,listName:r.listName,uniqueId:r.uniqueId,isbn:r.isbn})},r.uniqueId))})}function E({currentPage:t,totalPages:a,onPageChange:r}){return a<=1?null:e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center items-center space-x-2",children:[e.jsx("button",{onClick:()=>r(Math.max(1,t-1)),disabled:t===1,className:"cursor-pointer px-4 py-2 bg-main/70 hover:bg-main disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg transition-colors duration-200",children:"Previous"}),e.jsx("div",{className:"flex space-x-1 cursor-pointer",children:Array.from({length:Math.min(5,a)},(d,n)=>{let i;return a<=5||t<=3?i=n+1:t>=a-2?i=a-4+n:i=t-2+n,e.jsx("button",{onClick:()=>r(i),className:`cursor-pointer px-3 py-2 rounded-lg transition-colors duration-200 ${t===i?"bg-main text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-300"}`,children:i},i)})}),e.jsx("button",{onClick:()=>r(Math.min(a,t+1)),disabled:t===a,className:"cursor-pointer px-4 py-2 bg-main/70 hover:bg-main disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg transition-colors duration-200",children:"Next"})]})}const f=12;function G(){const{data:t}=c.useContext(C),[a,r]=c.useState(""),[d,n]=c.useState(""),[i,p]=c.useState(""),[x,m]=c.useState(1),u=c.useMemo(()=>{if(!t)return[];const o=[];return t.forEach(l=>{l.books.forEach(g=>{o.push({...g,listName:l.list_name,uniqueId:g.uniqueId,isbn:g.primary_isbn13})})}),o},[t]),h=c.useMemo(()=>{const o=new Set;return u.forEach(l=>{l.author&&o.add(l.author)}),Array.from(o).sort()},[u]),b=c.useMemo(()=>{const o=new Set;return t?.forEach(l=>{l.list_name&&o.add(l.list_name)}),Array.from(o).sort()},[t]),s=c.useMemo(()=>u.filter(o=>{const l=!a||o.title?.toLowerCase().includes(a.toLowerCase()),g=!d||o.author===d,k=!i||o.listName===i;return l&&g&&k}),[u,a,d,i]),j=Math.ceil(s.length/f),N=c.useMemo(()=>{const o=(x-1)*f;return s.slice(o,o+f)},[s,x]),v=()=>{m(1)},y=()=>{r(""),n(""),p(""),m(1)};return t?e.jsx(F,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"All Books"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Discover a diverse collection of bestselling books"})]}),e.jsx(S,{searchTerm:a,setSearchTerm:r,authorFilter:d,setAuthorFilter:n,listNameFilter:i,setListNameFilter:p,uniqueAuthors:h,uniqueListNames:b,filteredBooksCount:s.length,totalBooksCount:u.length,onFilterChange:v,onClearFilters:y}),e.jsx(B,{books:N,onClearFilters:y}),e.jsx(E,{currentPage:x,totalPages:j,onPageChange:m})]})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Loading..."})})})}export{G as default};
