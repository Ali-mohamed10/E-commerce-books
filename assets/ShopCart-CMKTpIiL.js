import{r as g,N as y,u as j,j as t,S as f}from"./index-xzx3QZ0O.js";import{C as N}from"./CartButton-Xxg4BQjF.js";import{S as u}from"./AnimationSection-DH6h4O_5.js";const b="+201154167974";function C(){const{data:l,setData:o}=g.useContext(y),{isSignedIn:d}=j(),a=l?.flatMap(n=>n.books.filter(e=>e.isToCart).map(e=>({title:e.title,imgCover:e.book_image,author:e.author,price:e.price,listName:n.list_name,uniqueId:e.uniqueId,isbn:e.primary_isbn13,quantity:e.quantity??1})))||[],c=a.reduce((n,e)=>n+(Number(e.price)||0)*(Number(e.quantity)||1),0),x=()=>{const e=`ðŸ›’ Order Details:

${a.map(s=>`ðŸ“š ${s.title} - ${s.author} - Qty: ${s.quantity} - $${s.price}`).join(`
`)}

ðŸ’° Total: $${c}

Hello! I would like to purchase these books.`,i=`https://wa.me/${b}?text=${encodeURIComponent(e)}`;window.open(i,"_blank")},m=n=>{l&&o(e=>{if(!e)return e;const i=e.map(s=>({...s,books:s.books.map(r=>r.uniqueId!==n?r:{...r,quantity:(r.quantity??1)+1})}));return localStorage.setItem("nytData",JSON.stringify(i)),i})},p=n=>{l&&o(e=>{if(!e)return e;const i=e.map(s=>({...s,books:s.books.map(r=>{if(r.uniqueId!==n)return r;const h=Math.max(1,(r.quantity??1)-1);return{...r,quantity:h}})}));return localStorage.setItem("nytData",JSON.stringify(i)),i})};return t.jsx(u,{children:t.jsxs("div",{className:"shop-cart container mx-auto px-5 rounded-2xl py-12 bg-backgrounds",children:[t.jsx("h2",{className:"text-2xl md:text-3xl mb-2 font-bold",children:"Shop Cart :"}),a.length!==0?a.map(n=>t.jsx(u,{children:t.jsxs("div",{children:[t.jsxs("div",{className:"flex flex-wrap gap-5 mt-5 items-center",children:[t.jsx("div",{children:t.jsx("img",{src:n.imgCover,alt:n.title,loading:"lazy",className:"h-32 w-full"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl md:text-2xl mb-1",children:n.title}),t.jsxs("span",{className:"block text-second text-base md:text-2xl mb-8",children:["price : $",n.price]}),t.jsx(N,{uniqueId:n.uniqueId})]}),t.jsxs("div",{className:"ml-auto",children:[t.jsx("button",{className:`text-white ml-2 py-0.5 px-1.5 border border-second bg-main ${n.quantity===1?"opacity-30":"cursor-pointer"}`,onClick:()=>p(n.uniqueId),children:"-"}),t.jsx("span",{className:"ml-2",children:n.quantity}),t.jsx("button",{className:"text-white ml-2 py-0.5 px-1.5 border border-second bg-main cursor-pointer",onClick:()=>m(n.uniqueId),children:"+"})]})]}),t.jsx("hr",{className:"mt-5"})]},n.uniqueId)})):t.jsx(t.Fragment,{children:t.jsx("p",{className:"text-gray-600 text-center text-xl md:text-2xl mt-5",children:"Your cart is empty"})}),a.length>0?t.jsxs("div",{className:"flex flex-wrap justify-between gap-5 mt-5",children:[t.jsxs("span",{className:"text-green-600 dark:text-green-500 md:text-xl",children:["Total Cart Price : $",c]}),d?t.jsx("button",{onClick:x,className:"bg-green-700 px-4 py-1 rounded-xl font-bold cursor-pointer text-white hover:bg-green-800 transition-colors duration-200",children:"Proceed To Buy"}):t.jsx(f,{mode:"modal",children:t.jsx("button",{className:"bg-green-700 px-4 py-1 rounded-xl font-bold cursor-pointer text-white hover:bg-green-800 transition-colors duration-200",children:"Sign In To Buy"})})]}):""]})})}export{C as default};
