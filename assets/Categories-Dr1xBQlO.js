import{j as e,r as n,N as v}from"./index-xzx3QZ0O.js";import{C as k}from"./Card-D477Ph6n.js";import{S as w}from"./AnimationSection-DH6h4O_5.js";import"./utils-BkGQLpsi.js";import"./CartButton-Xxg4BQjF.js";import"./FavoriteButton-vwxES2O_.js";function C({uniqueAuthors:t,uniqueListNames:r,filteredBooksCount:a,totalBooksCount:d,searchTerm:c,setSearchTerm:s,authorFilter:b,setAuthorFilter:m,listNameFilter:h,setListNameFilter:u,setCurrentPage:g}){const f=()=>{s(""),m(""),u(""),g(1)},x=()=>{g(1)};return e.jsxs("div",{className:"bg-white dark:bg-backgrounds rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:"Filter Books"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bookSearch",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search by Book Title"}),e.jsx("input",{id:"bookSearch",type:"text",placeholder:"Enter book title...",value:c,onChange:i=>{s(i.target.value),g(1)},className:"w-full cursor-pointer px-4 py-2 border rounded-lg focus:ring-2 focus:ring-second focus:border-transparent dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"authorFilter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Author"}),e.jsxs("select",{id:"authorFilter",value:b,onChange:i=>{m(i.target.value),x()},className:"w-full cursor-pointer px-4 py-2 border rounded-lg focus:ring-2 focus:ring-second focus:border-transparent dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Authors"}),t.map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"listNameFilter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Category"}),e.jsxs("select",{id:"listNameFilter",value:h,onChange:i=>{u(i.target.value),x()},className:"w-full cursor-pointer px-4 py-2 border rounded-lg focus:ring-2 focus:ring-second focus:border-transparent dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Categories"}),r.map(i=>e.jsx("option",{value:i,children:i},i))]})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Showing ",a," of ",d," books"]})}),(c||b||h)&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:f,className:"px-6 py-2 bg-main/60 hover:bg-main cursor-pointer text-white rounded-lg transition-colors duration-200",children:"Clear All Filters"})})]})}function S({onClearFilters:t}){return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“š"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Books Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Try changing your search criteria or filters"}),e.jsx("button",{onClick:t,className:"px-6 py-3 bg-main/60 hover:bg-main cursor-pointer text-white rounded-lg transition-colors duration-200",children:"Show All Books"})]})}function F({books:t,onClearFilters:r}){return!t||t.length===0?e.jsx(S,{onClearFilters:r}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-8",children:t.map(a=>e.jsx("div",{className:"flex justify-center",children:e.jsx(k,{title:a.title,imgCover:a.book_image,author:a.author,price:a.price,listName:a.listName,uniqueId:a.uniqueId,isbn:a.isbn})},a.uniqueId))})}function A({currentPage:t,totalPages:r,onPageChange:a}){return r<=1?null:e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center items-center space-x-2",children:[e.jsx("button",{onClick:()=>a(Math.max(1,t-1)),disabled:t===1,className:"cursor-pointer px-4 py-2 bg-main/70 hover:bg-main disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg transition-colors duration-200",children:"Previous"}),e.jsx("div",{className:"flex space-x-1 cursor-pointer",children:Array.from({length:Math.min(5,r)},(d,c)=>{let s;return r<=5||t<=3?s=c+1:t>=r-2?s=r-4+c:s=t-2+c,e.jsx("button",{onClick:()=>a(s),className:`cursor-pointer px-3 py-2 rounded-lg transition-colors duration-200 ${t===s?"bg-main text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-300"}`,children:s},s)})}),e.jsx("button",{onClick:()=>a(Math.min(r,t+1)),disabled:t===r,className:"cursor-pointer px-4 py-2 bg-main/70 hover:bg-main disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg transition-colors duration-200",children:"Next"})]})}const y=12;function L(){const{data:t}=n.useContext(v),[r,a]=n.useState(""),[d,c]=n.useState(""),[s,b]=n.useState(""),[m,h]=n.useState(1),u=n.useMemo(()=>{if(!t)return[];const o=[];return t.forEach(l=>{l.books.forEach(p=>{o.push({...p,listName:l.list_name,uniqueId:p.uniqueId,isbn:p.primary_isbn13})})}),o},[t]);n.useEffect(()=>{h(1)},[r,d,s]);const g=n.useMemo(()=>{const o=new Set;return u.forEach(l=>{l.author&&o.add(l.author)}),Array.from(o).sort()},[u]),f=n.useMemo(()=>{const o=new Set;return t?.forEach(l=>{l.list_name&&o.add(l.list_name)}),Array.from(o).sort()},[t]),x=n.useMemo(()=>u.filter(o=>{const l=!r||o.title?.toLowerCase().includes(r.toLowerCase()),p=!d||o.author===d,N=!s||o.listName===s;return l&&p&&N}),[u,r,d,s]),i=Math.ceil(x.length/y),j=n.useMemo(()=>{const o=(m-1)*y;return x.slice(o,o+y)},[x,m]);return t?e.jsx(w,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"All Books"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Discover a diverse collection of bestselling books"})]}),e.jsx(C,{uniqueAuthors:g,uniqueListNames:f,filteredBooksCount:x.length,totalBooksCount:u.length,searchTerm:r,setSearchTerm:a,authorFilter:d,setAuthorFilter:c,listNameFilter:s,setListNameFilter:b,setCurrentPage:h}),e.jsx(F,{books:j}),e.jsx(A,{currentPage:m,totalPages:i,onPageChange:h})]})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Loading..."})})})}export{L as default};
