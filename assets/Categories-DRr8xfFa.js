import{j as e,r as n,N as j}from"./index-B88h4pQU.js";import{C as N}from"./Card-CyJADQAV.js";import{S as v}from"./AnimationSection-P8thKqus.js";import"./border-beam-Cm6dnwmz.js";import"./utils-CMQPBayb.js";import"./CartButton-CpE2GNDI.js";import"./FavoriteButton-a_ssC-3w.js";function k({uniqueAuthors:t,uniqueListNames:s,filteredBooksCount:i,totalBooksCount:c,searchTerm:l,setSearchTerm:r,authorFilter:p,setAuthorFilter:m,listNameFilter:h,setListNameFilter:d,setCurrentPage:g}){const b=()=>{r(""),m(""),d(""),g(1)},x=()=>{g(1)};return e.jsxs("div",{className:"bg-white dark:bg-backgrounds rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:"Filter Books"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bookSearch",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search by Book Title"}),e.jsx("input",{id:"bookSearch",type:"text",placeholder:"Enter book title...",value:l,onChange:a=>{r(a.target.value),g(1)},className:"w-full cursor-pointer px-4 py-2 border rounded-lg focus:ring-2 focus:ring-second focus:border-transparent dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"authorFilter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Author"}),e.jsxs("select",{id:"authorFilter",value:p,onChange:a=>{m(a.target.value),x()},className:"w-full cursor-pointer px-4 py-2 border rounded-lg focus:ring-2 focus:ring-second focus:border-transparent dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Authors"}),t.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"listNameFilter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Category"}),e.jsxs("select",{id:"listNameFilter",value:h,onChange:a=>{d(a.target.value),x()},className:"w-full cursor-pointer px-4 py-2 border rounded-lg focus:ring-2 focus:ring-second focus:border-transparent dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Categories"}),s.map(a=>e.jsx("option",{value:a,children:a},a))]})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Showing ",i," of ",c," books"]})}),(l||p||h)&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:b,className:"px-6 py-2 bg-main/60 hover:bg-main cursor-pointer text-white rounded-lg transition-colors duration-200",children:"Clear All Filters"})})]})}function w({onClearFilters:t}){return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“š"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Books Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Try changing your search criteria or filters"}),e.jsx("button",{onClick:t,className:"px-6 py-3 bg-main/60 hover:bg-main cursor-pointer text-white rounded-lg transition-colors duration-200",children:"Show All Books"})]})}function C({books:t,onClearFilters:s}){return!t||t.length===0?e.jsx(w,{onClearFilters:s}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-8",children:t.map(i=>e.jsx("div",{className:"flex justify-center",children:e.jsx(N,{title:i.title,imgCover:i.book_image,author:i.author,price:i.price,listName:i.listName,uniqueId:i.uniqueId,isbn:i.isbn})},i.uniqueId))})}function B({currentPage:t,totalPages:s,onPageChange:i}){return s<=1?null:e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center items-center space-x-2",children:[e.jsx("button",{onClick:()=>i(Math.max(1,t-1)),disabled:t===1,className:"cursor-pointer px-4 py-2 bg-main/70 hover:bg-main disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg transition-colors duration-200",children:"Previous"}),e.jsx("div",{className:"flex space-x-1 cursor-pointer",children:Array.from({length:Math.min(5,s)},(c,l)=>{let r;return s<=5||t<=3?r=l+1:t>=s-2?r=s-4+l:r=t-2+l,e.jsx("button",{onClick:()=>i(r),className:`cursor-pointer px-3 py-2 rounded-lg transition-colors duration-200 ${t===r?"bg-main text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-300"}`,children:r},r)})}),e.jsx("button",{onClick:()=>i(Math.min(s,t+1)),disabled:t===s,className:"cursor-pointer px-4 py-2 bg-main/70 hover:bg-main disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg transition-colors duration-200",children:"Next"})]})}const f=12;function I(){const{data:t}=n.useContext(j),[s,i]=n.useState(""),[c,l]=n.useState(""),[r,p]=n.useState(""),[m,h]=n.useState(1),d=n.useMemo(()=>t?t.flatMap(o=>(o.books||[]).map(u=>({...u,listName:o.list_name,uniqueId:u.uniqueId,isbn:u.primary_isbn13}))):[],[t]);n.useEffect(()=>{h(1)},[s,c,r]);const g=n.useMemo(()=>[...new Set(d.map(o=>o.author).filter(Boolean))].sort(),[d]),b=n.useMemo(()=>[...new Set((t||[]).map(o=>o.list_name).filter(Boolean))].sort(),[t]),x=n.useMemo(()=>{const o=s.trim().toLowerCase();return d.filter(u=>(!o||u.title?.toLowerCase().includes(o))&&(!c||u.author===c)&&(!r||u.listName===r))},[d,s,c,r]),a=Math.ceil(x.length/f),y=n.useMemo(()=>{const o=(m-1)*f;return x.slice(o,o+f)},[x,m]);return t?e.jsx(v,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8 pt-16",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-5xl font-semibold text-gray-900 dark:text-white mb-4",children:"All Books"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Discover a diverse collection of bestselling books"})]}),e.jsx(k,{uniqueAuthors:g,uniqueListNames:b,filteredBooksCount:x.length,totalBooksCount:d.length,searchTerm:s,setSearchTerm:i,authorFilter:c,setAuthorFilter:l,listNameFilter:r,setListNameFilter:p,setCurrentPage:h}),e.jsx(C,{books:y}),e.jsx(B,{currentPage:m,totalPages:a,onPageChange:h})]})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Loading..."})})})}export{I as default};
