import{j as e,r as c,N as w}from"./index-BQHji7x1.js";import{C as F}from"./Card-JdFv5L99.js";import{S}from"./AnimationSection-CljoU1C8.js";import"./utils-BgRx4E8E.js";import"./CartButton-DhxeZ-wZ.js";import"./FavoriteButton-XLwD4Oqk.js";function A({searchTerm:t,setSearchTerm:s,authorFilter:r,setAuthorFilter:x,listNameFilter:n,setListNameFilter:a,uniqueAuthors:g,uniqueListNames:u,filteredBooksCount:h,totalBooksCount:m,onFilterChange:d,onClearFilters:b}){return e.jsxs("div",{className:"bg-white dark:bg-backgrounds rounded-lg shadow-lg p-6 mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:"Filter Books"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bookSearch",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search by Book Title"}),e.jsx("input",{id:"bookSearch",type:"text",placeholder:"Enter book title...",value:t,onChange:o=>{s(o.target.value),d()},className:"w-full cursor-pointer px-4 py-2 border rounded-lg focus:ring-2 focus:ring-second focus:border-transparent dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"authorFilter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Author"}),e.jsxs("select",{id:"authorFilter",value:r,onChange:o=>{x(o.target.value),d()},className:"w-full cursor-pointer px-4 py-2 border rounded-lg focus:ring-2 focus:ring-second focus:border-transparent dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Authors"}),g.map(o=>e.jsx("option",{value:o,children:o},o))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"listNameFilter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Filter by Category"}),e.jsxs("select",{id:"listNameFilter",value:n,onChange:o=>{a(o.target.value),d()},className:"w-full cursor-pointer px-4 py-2 border rounded-lg focus:ring-2 focus:ring-second focus:border-transparent dark:bg-gray-700",children:[e.jsx("option",{value:"",children:"All Categories"}),u.map(o=>e.jsx("option",{value:o,children:o},o))]})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Showing ",h," of ",m," books"]})}),(t||r||n)&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:b,className:"px-6 py-2 bg-main/60 hover:bg-main cursor-pointer text-white rounded-lg transition-colors duration-200",children:"Clear All Filters"})})]})}function B({onClearFilters:t}){return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“š"}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-2",children:"No Books Found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Try changing your search criteria or filters"}),e.jsx("button",{onClick:t,className:"px-6 py-3 bg-main/60 hover:bg-main cursor-pointer text-white rounded-lg transition-colors duration-200",children:"Show All Books"})]})}function M({books:t,onClearFilters:s}){return!t||t.length===0?e.jsx(B,{onClearFilters:s}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-8",children:t.map(r=>e.jsx("div",{className:"flex justify-center",children:e.jsx(F,{title:r.title,imgCover:r.book_image,author:r.author,price:r.price,listName:r.listName,listIndex:r.listIndex,bookIndex:r.bookIndex})},`${r.listIndex}-${r.bookIndex}`))})}function E({currentPage:t,totalPages:s,onPageChange:r}){return s<=1?null:e.jsxs("div",{className:"flex flex-wrap gap-3 justify-center items-center space-x-2",children:[e.jsx("button",{onClick:()=>r(Math.max(1,t-1)),disabled:t===1,className:"cursor-pointer px-4 py-2 bg-main/70 hover:bg-main disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg transition-colors duration-200",children:"Previous"}),e.jsx("div",{className:"flex space-x-1 cursor-pointer",children:Array.from({length:Math.min(5,s)},(x,n)=>{let a;return s<=5||t<=3?a=n+1:t>=s-2?a=s-4+n:a=t-2+n,e.jsx("button",{onClick:()=>r(a),className:`cursor-pointer px-3 py-2 rounded-lg transition-colors duration-200 ${t===a?"bg-main text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-300"}`,children:a},a)})}),e.jsx("button",{onClick:()=>r(Math.min(s,t+1)),disabled:t===s,className:"cursor-pointer px-4 py-2 bg-main/70 hover:bg-main disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-lg transition-colors duration-200",children:"Next"})]})}function D(){const{data:t}=c.useContext(w),[s,r]=c.useState(""),[x,n]=c.useState(""),[a,g]=c.useState(""),[u,h]=c.useState(1),m=12,d=c.useMemo(()=>{if(!t)return[];const i=[];return t.forEach((l,f)=>{l.books.forEach((y,C)=>{i.push({...y,listIndex:f,bookIndex:C,listName:l.list_name})})}),i},[t]),b=c.useMemo(()=>{const i=new Set;return d.forEach(l=>{l.author&&i.add(l.author)}),Array.from(i).sort()},[d]),o=c.useMemo(()=>{const i=new Set;return t?.forEach(l=>{l.list_name&&i.add(l.list_name)}),Array.from(i).sort()},[t]),p=c.useMemo(()=>d.filter(i=>{const l=!s||i.title?.toLowerCase().includes(s.toLowerCase()),f=!x||i.author===x,y=!a||i.listName===a;return l&&f&&y}),[d,s,x,a]),N=Math.ceil(p.length/m),k=c.useMemo(()=>{const i=(u-1)*m;return p.slice(i,i+m)},[p,u,m]),v=()=>{h(1)},j=()=>{r(""),n(""),g(""),h(1)};return t?e.jsx(S,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"All Books"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Discover a diverse collection of bestselling books"})]}),e.jsx(A,{searchTerm:s,setSearchTerm:r,authorFilter:x,setAuthorFilter:n,listNameFilter:a,setListNameFilter:g,uniqueAuthors:b,uniqueListNames:o,filteredBooksCount:p.length,totalBooksCount:d.length,onFilterChange:v,onClearFilters:j}),e.jsx(M,{books:k,onClearFilters:j}),e.jsx(E,{currentPage:u,totalPages:N,onPageChange:h})]})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Loading..."})})})}export{D as default};
