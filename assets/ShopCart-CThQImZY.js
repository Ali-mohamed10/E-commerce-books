import{r as n,N as f,u as C,j as e,S as q}from"./index-qiT7CAG5.js";import{C as w}from"./CartButton-Dri50O_8.js";import{S as h}from"./AnimationSection-DO1rs-X9.js";const I="+201154167974";function v(){const{data:r,setData:u}=n.useContext(f),{isSignedIn:g}=C(),a=n.useMemo(()=>r?.flatMap(t=>t.books.filter(s=>s.isToCart).map(s=>({title:s.title,imgCover:s.book_image,author:s.author,price:s.price,listName:t.list_name,uniqueId:s.uniqueId,isbn:s.primary_isbn13,quantity:s.quantity??1})))||[],[r]),l=n.useMemo(()=>a.reduce((t,s)=>t+(Number(s.price)||0)*(Number(s.quantity)||1),0),[a]),d=n.useMemo(()=>`ðŸ›’ Order Details:

${a.map(s=>`ðŸ“š ${s.title} - ${s.author} - Qty: ${s.quantity} - $${s.price}`).join(`
`)}

ðŸ’° Total: $${l.toFixed(2)}

Hello! I would like to purchase these books.`,[a,l]),x=n.useMemo(()=>`https://wa.me/${I}?text=${encodeURIComponent(d)}`,[d]),y=n.useCallback(()=>{window.open(x,"_blank")},[x]),i=n.useCallback((t,s)=>{r&&u(c=>{if(!c)return c;const m=c.map(p=>({...p,books:p.books.map(o=>{if(o.uniqueId!==t)return o;const N=Math.max(1,(o.quantity??1)+s);return{...o,quantity:N}})}));return localStorage.setItem("nytData",JSON.stringify(m)),m})},[r,u]),j=n.useCallback(t=>i(t,1),[i]),b=n.useCallback(t=>i(t,-1),[i]);return e.jsx(h,{children:e.jsxs("div",{className:"shop-cart container mx-auto px-5 rounded-2xl py-12 bg-backgrounds",children:[e.jsx("h2",{className:"text-2xl md:text-3xl mb-2 font-bold",children:"Shop Cart :"}),a.length!==0?a.map(t=>e.jsx(h,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap gap-5 mt-5 items-center",children:[e.jsx("div",{children:e.jsx("img",{src:t.imgCover,alt:t.title,loading:"lazy",className:"h-32 w-full"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl md:text-2xl mb-1",children:t.title}),e.jsxs("span",{className:"block text-second text-base md:text-2xl mb-8",children:["price : $",t.price]}),e.jsx(w,{uniqueId:t.uniqueId})]}),e.jsxs("div",{className:"ml-auto",children:[e.jsx("button",{className:`text-white ml-2 py-0.5 px-1.5 border border-second bg-main ${t.quantity===1?"opacity-30":"cursor-pointer"}`,onClick:()=>b(t.uniqueId),children:"-"}),e.jsx("span",{className:"ml-2",children:t.quantity}),e.jsx("button",{className:"text-white ml-2 py-0.5 px-1.5 border border-second bg-main cursor-pointer",onClick:()=>j(t.uniqueId),children:"+"})]})]}),e.jsx("hr",{className:"mt-5"})]})},t.uniqueId)):e.jsx(e.Fragment,{children:e.jsx("p",{className:"text-gray-600 text-center text-xl md:text-2xl mt-5",children:"Your cart is empty"})}),a.length>0?e.jsxs("div",{className:"flex flex-wrap justify-between gap-5 mt-5",children:[e.jsxs("span",{className:"text-green-600 dark:text-green-500 md:text-xl",children:["Total Cart Price : $",l]}),g?e.jsx("button",{onClick:y,className:"bg-green-700 px-4 py-1 rounded-xl font-bold cursor-pointer text-white hover:bg-green-800 transition-colors duration-200",children:"Proceed To Buy"}):e.jsx(q,{mode:"modal",children:e.jsx("button",{className:"bg-green-700 px-4 py-1 rounded-xl font-bold cursor-pointer text-white hover:bg-green-800 transition-colors duration-200",children:"Sign In To Buy"})})]}):""]})})}export{v as default};
